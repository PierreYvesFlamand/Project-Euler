/**
 * Problem 44 - Pentagon Numbers
 * 
 * Pentagonal numbers are generated by the formula, P_n = n(3n-1)/2. The first ten pentagonal numbers are:
 *          1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...
 * 
 * It can be seen that P_4 + P_7 = 22 + 70 = 92 = P_8. However, their difference, 70 - 22 = 48, is not pentagonal.
 * Find the pair of pentagonal numbers, P_j and P_k, for which their sum and difference are pentagonal and D = |P_k - P_j| is minimised; what is the value of D?
 */

const input = 10 ** 8;
let answer;

const pentagonalNumbers = [];
function addNextPentagonalNumber() {
    for (let i = (pentagonalNumbers[pentagonalNumbers.length - 1] || 0) + 1; ; i++) {
        if (!isPentagonal(i)) continue;
        pentagonalNumbers.push(i);
        break;
    }
}

addNextPentagonalNumber();
while (pentagonalNumbers[pentagonalNumbers.length - 1] < input && !answer) {
    addNextPentagonalNumber();
    for (let i = 0; i < pentagonalNumbers.length; i++) {
        const j = pentagonalNumbers[pentagonalNumbers.length - 1];
        const k = pentagonalNumbers[i];

        if (!isPentagonal(j + k)) continue;
        if (!isPentagonal(Math.abs(j - k))) continue;
        answer = Math.abs(j - k);
        break;
    }
}

module.exports = answer;

function isPentagonal(n) {
    return ((Math.sqrt(24 * n + 1) + 1) / 6) % 1 === 0;
}